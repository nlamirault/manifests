{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Kubernetes Manifests \u00b6 v0.23.0 Description \u00b6 The manifests project defines Kubernetes manifests files for Kubernetes components deployed on Skale-5 projects. {{#include ../../README.md:Tools}} Kustomize versions Be careful with Kustomize versions. Do not use Kustomize < 2.1.x.","title":"Introduction"},{"location":"#kubernetes-manifests","text":"v0.23.0","title":"Kubernetes Manifests"},{"location":"#description","text":"The manifests project defines Kubernetes manifests files for Kubernetes components deployed on Skale-5 projects. {{#include ../../README.md:Tools}} Kustomize versions Be careful with Kustomize versions. Do not use Kustomize < 2.1.x.","title":"Description"},{"location":"CONTRIBUTING/","text":"{{#include ../../CONTRIBUTING.md}}","title":"Contributing"},{"location":"code-of-conduct/","text":"Code of Conduct \u00b6","title":"Code of Conduct"},{"location":"code-of-conduct/#code-of-conduct","text":"","title":"Code of Conduct"},{"location":"roadmap/","text":"{{#include ../../ChangeLog.md}}","title":"Roadmap"},{"location":"developer/best-practices/","text":"Kustomize Best Practices \u00b6 Documentation \u00b6 Add a README.md file which must contains theses informations : # The Fake component ## Description A description ## Usage apiVersion: kustomize.config.k8s.io/v1beta1 genre: Kustomization bases: - git@github.com:nlamirault/manifests.git//resources/xxxxx/xxxxx/base?ref=vx.y.z ## Releases | Release | Manifests tag | | ------------------:|:---------------------:| | `vx.y.z` | `vx.y.z` | Resource file naming \u00b6 Resources must be organized by Kind. The file name must be the type of the Kind in Camel Case. For example: a Deployment would go to a file named deployment.yaml a ClusterRoleBinding would go into a file called clusterRoleBinding.yaml Kubernetes common labels \u00b6 Each component must have theses labels : app.kubernetes.io/name : todo app.kubernetes.io/instance : todo app.kubernetes.io/component : the namespace name app.kubernetes.io/version : release using Semver vMAJOR.MINOR.PATCH app.kubernetes.io/part-of : name of the project app.kubernetes.io/managed-by : kustomize env : environment ( staging , prod , ...) Action Required Do not use the **commonLabels** feature of kustomize. With this feature, those labels would also be added to selectors which might not be what you want depending on the use case at hand. You can use a custom label transformer to add your own labels to all ressources /metadata/labels . the kustomization.yaml file : --- kind : Kustomization apiVersion : kustomize.config.k8s.io/v1beta1 bases : - \"../../base\" transformers : - metadataLabelTransformer.yaml and the metadataLabelTransformer.yaml file : --- apiVersion : builtin kind : LabelTransformer metadata : name : labelTransformer labels : app.kubernetes.io/name : minotor-landing-dashboard app.kubernetes.io/instance : minotor-landing app.kubernetes.io/component : customer app.kubernetes.io/version : v0.2.1 app.kubernetes.io/part-of : ma-societe-infra app.kubernetes.io/managed-by : kustomize app.kubernetes.io/manufacturer : Fsociety env : staging fieldSpecs : - path : metadata/labels create : true - kind : Deployment path : spec/template/metadata/labels create : true Removing common attributes across resources \u00b6 There are often repeated attributes across resources: labels, namespace, or perhaps a common prefix used for each resource. Move into the kustomization.yaml file: the namespace labels and their selectors Overlays \u00b6 Each component must have 2 overlays : staging , which use base with path: --- kind : Kustomization apiVersion : kustomize.config.k8s.io/v1beta1 bases : - ../../base remote , which use remote base: --- kind : Kustomization apiVersion : kustomize.config.k8s.io/v1beta1 bases : - git@github.com:nlamirault/manifests.git//resources/logging/elasticsearch/base?ref=v0.8.0","title":"Best Practices"},{"location":"developer/best-practices/#kustomize-best-practices","text":"","title":"Kustomize Best Practices"},{"location":"developer/best-practices/#documentation","text":"Add a README.md file which must contains theses informations : # The Fake component ## Description A description ## Usage apiVersion: kustomize.config.k8s.io/v1beta1 genre: Kustomization bases: - git@github.com:nlamirault/manifests.git//resources/xxxxx/xxxxx/base?ref=vx.y.z ## Releases | Release | Manifests tag | | ------------------:|:---------------------:| | `vx.y.z` | `vx.y.z` |","title":"Documentation"},{"location":"developer/best-practices/#resource-file-naming","text":"Resources must be organized by Kind. The file name must be the type of the Kind in Camel Case. For example: a Deployment would go to a file named deployment.yaml a ClusterRoleBinding would go into a file called clusterRoleBinding.yaml","title":"Resource file naming"},{"location":"developer/best-practices/#kubernetes-common-labels","text":"Each component must have theses labels : app.kubernetes.io/name : todo app.kubernetes.io/instance : todo app.kubernetes.io/component : the namespace name app.kubernetes.io/version : release using Semver vMAJOR.MINOR.PATCH app.kubernetes.io/part-of : name of the project app.kubernetes.io/managed-by : kustomize env : environment ( staging , prod , ...)","title":"Kubernetes common labels"},{"location":"developer/best-practices/#removing-common-attributes-across-resources","text":"There are often repeated attributes across resources: labels, namespace, or perhaps a common prefix used for each resource. Move into the kustomization.yaml file: the namespace labels and their selectors","title":"Removing common attributes across resources"},{"location":"developer/best-practices/#overlays","text":"Each component must have 2 overlays : staging , which use base with path: --- kind : Kustomization apiVersion : kustomize.config.k8s.io/v1beta1 bases : - ../../base remote , which use remote base: --- kind : Kustomization apiVersion : kustomize.config.k8s.io/v1beta1 bases : - git@github.com:nlamirault/manifests.git//resources/logging/elasticsearch/base?ref=v0.8.0","title":"Overlays"},{"location":"developer/guide/","text":"Developer Guide \u00b6","title":"Developer"},{"location":"developer/guide/#developer-guide","text":"","title":"Developer Guide"},{"location":"reference/glossary/","text":"Glossary \u00b6","title":"Glossary"},{"location":"reference/glossary/#glossary","text":"","title":"Glossary"},{"location":"reference/reference/","text":"Reference \u00b6","title":"Reference"},{"location":"reference/reference/#reference","text":"","title":"Reference"},{"location":"stacks/","text":"Composants \u00b6","title":"Composants"},{"location":"stacks/#composants","text":"","title":"Composants"},{"location":"stacks/cert-manager/","text":"Cert-Manager \u00b6 This stack is to automate certificate management using cert-manager First install CRD: cert-manager CRDs Then the application: cert-manager Note On the `cert-manager` overlay do not change namespace. Then you could install a clusterissuer to use Let's Encrypt","title":"Description"},{"location":"stacks/cert-manager/#cert-manager","text":"This stack is to automate certificate management using cert-manager First install CRD: cert-manager CRDs Then the application: cert-manager","title":"Cert-Manager"},{"location":"stacks/cert-manager/cert-manager-crds/","text":"{{#include ../../../../resources/cert-manager/cert-manager-crds/README.md}}","title":"Cert Manager CRDs"},{"location":"stacks/cert-manager/cert-manager/","text":"{{#include ../../../../resources/cert-manager/cert-manager/README.md}}","title":"Cert Manager"},{"location":"stacks/customer/","text":"Skale-5 Minotor \u00b6 The Minotor stack provides : a ClusterIssuer for Letsencrypt certificates","title":"Description"},{"location":"stacks/customer/#skale-5-minotor","text":"The Minotor stack provides : a ClusterIssuer for Letsencrypt certificates","title":"Skale-5 Minotor"},{"location":"stacks/customer/minotor-letsencrypt/","text":"{{#include ../../../../resources/customer/minotor-letsencrypt/README.md}}","title":"Minotor Letsencrypt"},{"location":"stacks/dns/","text":"DNS \u00b6","title":"DNS"},{"location":"stacks/dns/#dns","text":"","title":"DNS"},{"location":"stacks/identity/","text":"Identity \u00b6","title":"Identity"},{"location":"stacks/identity/#identity","text":"","title":"Identity"},{"location":"stacks/ingress-controllers/","text":"Ingress Controllers \u00b6 In order for the Ingress resource to work, the cluster must have an ingress controller running. An Ingress with no rules sends all traffic to a single default backend : default-backend Choices : nginx-ingress-controller","title":"Description"},{"location":"stacks/ingress-controllers/#ingress-controllers","text":"In order for the Ingress resource to work, the cluster must have an ingress controller running. An Ingress with no rules sends all traffic to a single default backend : default-backend Choices : nginx-ingress-controller","title":"Ingress Controllers"},{"location":"stacks/ingress-controllers/default-backend/","text":"{{#include ../../../../resources/ingress-controllers/default-backend/README.md}}","title":"Default Backend"},{"location":"stacks/ingress-controllers/ingress-nginx/","text":"{{#include ../../../../resources/ingress-controllers/ingress-nginx/README.md}}","title":"Nginx Ingress Controllers"},{"location":"stacks/kube-system/","text":"Kube-System \u00b6","title":"Kube-System"},{"location":"stacks/kube-system/#kube-system","text":"","title":"Kube-System"},{"location":"stacks/kube-system/kube-monitors/","text":"{{#include ../../../../resources/kube-system/kube-monitors/README.md}}","title":"Kube monitors"},{"location":"stacks/logging/","text":"Logging \u00b6 These components are going to be deployed in logging namespace in your Kubernetes cluster. EFK \u00b6 You could deploy the Logging stack like that : First install CRD: elastic operator CRDs Then the operator : elastic operator Then operated components : elasticsearch kibana And choose component to retrieve logs : filebeat fluentd PLG \u00b6 You could deploy the Logging stack like that : promtail to retrieve logs loki grafana Note Grafana will be deployed in the `monitoring` namespace","title":"Description"},{"location":"stacks/logging/#logging","text":"These components are going to be deployed in logging namespace in your Kubernetes cluster.","title":"Logging"},{"location":"stacks/logging/#efk","text":"You could deploy the Logging stack like that : First install CRD: elastic operator CRDs Then the operator : elastic operator Then operated components : elasticsearch kibana And choose component to retrieve logs : filebeat fluentd","title":"EFK"},{"location":"stacks/logging/#plg","text":"You could deploy the Logging stack like that : promtail to retrieve logs loki grafana","title":"PLG"},{"location":"stacks/logging/elastic-operator-crds/","text":"{{#include ../../../../resources/logging/elastic-operator-crds/README.md}}","title":"Elastic Operator CRDs"},{"location":"stacks/logging/elastic-operator/","text":"Elastic Operator \u00b6 Description \u00b6 Elastic Cloud on Kubernetes Depends on : Elastic Operator CRDs Usage \u00b6 apiVersion : kustomize.config.k8s.io/v1beta1 genre : Kustomization bases : - git@github.com:nlamirault/manifests.git//resources/logging/elastic-operator/base?ref=vx.y.z Releases \u00b6 Release Manifests tag v1.0.0 v0.9.0 v0.9.0 v0.2.0","title":"Elastic Operator"},{"location":"stacks/logging/elastic-operator/#elastic-operator","text":"","title":"Elastic Operator"},{"location":"stacks/logging/elastic-operator/#description","text":"Elastic Cloud on Kubernetes Depends on : Elastic Operator CRDs","title":"Description"},{"location":"stacks/logging/elastic-operator/#usage","text":"apiVersion : kustomize.config.k8s.io/v1beta1 genre : Kustomization bases : - git@github.com:nlamirault/manifests.git//resources/logging/elastic-operator/base?ref=vx.y.z","title":"Usage"},{"location":"stacks/logging/elastic-operator/#releases","text":"Release Manifests tag v1.0.0 v0.9.0 v0.9.0 v0.2.0","title":"Releases"},{"location":"stacks/logging/elasticsearch/","text":"{{#include ../../../../resources/logging/elasticsearch/README.md}}","title":"Elasticsearch"},{"location":"stacks/logging/filebeat/","text":"{{#include ../../../../resources/logging/filebeat/README.md}}","title":"Filebeat"},{"location":"stacks/logging/kibana/","text":"{{#include ../../../../resources/logging/kibana/README.md}}","title":"Kibana"},{"location":"stacks/logging/loki/","text":"{{#include ../../../../resources/logging/loki/README.md}}","title":"Loki"},{"location":"stacks/logging/promtail/","text":"{{#include ../../../../resources/logging/promtail/README.md}}","title":"Promtail"},{"location":"stacks/monitoring/","text":"Monitoring \u00b6 These components are going to be deployed in monitoring namespace in your Kubernetes cluster. You could deploy the Monitoring Stack like that : First install CRD: Prometheus Operator CRDs Then the operator : Prometheus Operator Then operated components : Prometheus-Thanos Thanos Alertmanager Then install components for virtual machines and Kubernetes : NodeExporter KubeStateMetrics And : kube-monitors-aks for AKS cluster kube-monitors-eks for EKS cluster kube-monitors-gke for GKE cluster kube-monitors-k3s for K3S cluster","title":"Description"},{"location":"stacks/monitoring/#monitoring","text":"These components are going to be deployed in monitoring namespace in your Kubernetes cluster. You could deploy the Monitoring Stack like that : First install CRD: Prometheus Operator CRDs Then the operator : Prometheus Operator Then operated components : Prometheus-Thanos Thanos Alertmanager Then install components for virtual machines and Kubernetes : NodeExporter KubeStateMetrics And : kube-monitors-aks for AKS cluster kube-monitors-eks for EKS cluster kube-monitors-gke for GKE cluster kube-monitors-k3s for K3S cluster","title":"Monitoring"},{"location":"stacks/monitoring/alertmanager/","text":"{{#include ../../../../resources/monitoring/alertmanager/README.md}}","title":"Alertmanager"},{"location":"stacks/monitoring/blackbox-exporter/","text":"{{#include ../../../../resources/monitoring/blackbox-exporter/README.md}}","title":"Blackbox Exporter"},{"location":"stacks/monitoring/elasticsearch-exporter/","text":"{{#include ../../../../resources/monitoring/elasticsearch-exporter/README.md}}","title":"Elasticsearch Exporter"},{"location":"stacks/monitoring/grafana/","text":"{{#include ../../../../resources/monitoring/grafana/README.md}}","title":"Grafana"},{"location":"stacks/monitoring/kube-monitors-aks/","text":"{{#include ../../../../resources/monitoring/kube-monitors-aks/README.md}}","title":"Kube Monitors AKS"},{"location":"stacks/monitoring/kube-monitors-eks/","text":"{{#include ../../../../resources/monitoring/kube-monitors-eks/README.md}}","title":"Kube Monitors EKS"},{"location":"stacks/monitoring/kube-monitors-gke/","text":"{{#include ../../../../resources/monitoring/kube-monitors-gke/README.md}}","title":"Kube Monitors GKE"},{"location":"stacks/monitoring/kube-monitors-k3s/","text":"{{#include ../../../../resources/monitoring/kube-monitors-k3s/README.md}}","title":"Kube Monitors K3S"},{"location":"stacks/monitoring/kube-monitors/","text":"Kube Monitors \u00b6","title":"Kube Monitors"},{"location":"stacks/monitoring/kube-monitors/#kube-monitors","text":"","title":"Kube Monitors"},{"location":"stacks/monitoring/kube-state-metrics/","text":"{{#include ../../../../resources/monitoring/kube-state-metrics/README.md}}","title":"Kube State Metrics"},{"location":"stacks/monitoring/memcached-exporter/","text":"{{#include ../../../../resources/monitoring/memcached-exporter/README.md}}","title":"Memcached Exporter"},{"location":"stacks/monitoring/monitoring-elasticsearch/","text":"{{#include ../../../../resources/monitoring/monitoring-elasticsearch/README.md}}","title":"Monitoring Elasticsearch"},{"location":"stacks/monitoring/monitoring-memcached/","text":"{{#include ../../../../resources/monitoring/monitoring-memcached/README.md}}","title":"Monitoring Memcached"},{"location":"stacks/monitoring/monitoring-mysql/","text":"{{#include ../../../../resources/monitoring/monitoring-mysql/README.md}}","title":"Monitoring MySQL"},{"location":"stacks/monitoring/monitoring-rabbitmq/","text":"{{#include ../../../../resources/monitoring/monitoring-rabbitmq/README.md}}","title":"Monitoring RabbitMQ"},{"location":"stacks/monitoring/monitoring-redis/","text":"{{#include ../../../../resources/monitoring/monitoring-redis/README.md}}","title":"Monitoring Redis"},{"location":"stacks/monitoring/monitoring-solr/","text":"{{#include ../../../../resources/monitoring/monitoring-solr/README.md}}","title":"Monitoring Solr"},{"location":"stacks/monitoring/monitoring-varnish/","text":"{{#include ../../../../resources/monitoring/monitoring-varnish/README.md}}","title":"Monitoring Varnish"},{"location":"stacks/monitoring/mysql-exporter/","text":"{{#include ../../../../resources/monitoring/mysql-exporter/README.md}}","title":"MySQL Exporter"},{"location":"stacks/monitoring/node-exporter/","text":"{{#include ../../../../resources/monitoring/node-exporter/README.md}}","title":"Node Exporter"},{"location":"stacks/monitoring/pgbouncer-exporter/","text":"{{#include ../../../../resources/monitoring/pgbouncer-exporter/README.md}}","title":"PGBouncer Exporter"},{"location":"stacks/monitoring/postgres-exporter/","text":"{{#include ../../../../resources/monitoring/postgres-exporter/README.md}}","title":"Postgres Exporter"},{"location":"stacks/monitoring/prometheus-operator-crds/","text":"{{#include ../../../../resources/monitoring/prometheus-operator-crds/README.md}}","title":"Prometheus Operator CRDs"},{"location":"stacks/monitoring/prometheus-operator/","text":"{{#include ../../../../resources/monitoring/prometheus-operator/README.md}}","title":"Prometheus Operator"},{"location":"stacks/monitoring/prometheus-thanos/","text":"{{#include ../../../../resources/monitoring/prometheus-thanos/README.md}}","title":"Prometheus Thanos"},{"location":"stacks/monitoring/prometheus/","text":"{{#include ../../../../resources/monitoring/prometheus/README.md}}","title":"Prometheus"},{"location":"stacks/monitoring/pushgateway/","text":"{{#include ../../../../resources/monitoring/pushgateway/README.md}}","title":"Pushgateway"},{"location":"stacks/monitoring/redis-exporter/","text":"{{#include ../../../../resources/monitoring/redis-exporter/README.md}}","title":"Redis Exporter"},{"location":"stacks/monitoring/solr-exporter/","text":"{{#include ../../../../resources/monitoring/solr-exporter/README.md}}","title":"Solr Exporter"},{"location":"stacks/monitoring/thanos/","text":"{{#include ../../../../resources/monitoring/thanos/README.md}}","title":"Thanos"},{"location":"stacks/operations/","text":"Operations \u00b6","title":"Operations"},{"location":"stacks/operations/#operations","text":"","title":"Operations"},{"location":"stacks/reporting/","text":"Reporting \u00b6","title":"Description"},{"location":"stacks/reporting/#reporting","text":"","title":"Reporting"},{"location":"stacks/reporting/kube-resource-report/","text":"{{#include ../../../../resources/reporting/kube-resource-report/README.md}}","title":"Kube Resource Report"},{"location":"stacks/reporting/polaris/","text":"{{#include ../../../../resources/reporting/polaris/README.md}}","title":"Polaris"},{"location":"stacks/security/","text":"Security \u00b6 These components are going to be deployed in security namespace in your Kubernetes cluster. OpenPolicyAgent","title":"Description"},{"location":"stacks/security/#security","text":"These components are going to be deployed in security namespace in your Kubernetes cluster. OpenPolicyAgent","title":"Security"},{"location":"stacks/security/open-policy-agent/","text":"OpenPolicyAgent \u00b6","title":"OpenPolicyAgent"},{"location":"stacks/security/open-policy-agent/#openpolicyagent","text":"","title":"OpenPolicyAgent"},{"location":"user/","text":"User \u00b6","title":"User"},{"location":"user/#user","text":"","title":"User"},{"location":"user/alerting/","text":"Alerting \u00b6 Description \u00b6 Mixins \u00b6 Overview: monitoring-mixins kubernetes-mixin node-mixin prometheus-mixin thanos-mixin loki-mixin etcd-mixin Addons \u00b6 node-exporter elasticsearch memcached mysql rabbitmq redis solr varnish {{#include ../../../alerts.md}}","title":"Alerting"},{"location":"user/alerting/#alerting","text":"","title":"Alerting"},{"location":"user/alerting/#description","text":"","title":"Description"},{"location":"user/alerting/#mixins","text":"Overview: monitoring-mixins kubernetes-mixin node-mixin prometheus-mixin thanos-mixin loki-mixin etcd-mixin","title":"Mixins"},{"location":"user/alerting/#addons","text":"node-exporter elasticsearch memcached mysql rabbitmq redis solr varnish {{#include ../../../alerts.md}}","title":"Addons"},{"location":"user/quick-start/","text":"Quick Start \u00b6 {{#include ../../../README.md:Usage}}","title":"Quick Start"},{"location":"user/quick-start/#quick-start","text":"{{#include ../../../README.md:Usage}}","title":"Quick Start"},{"location":"user/troubleshooting/","text":"Troubleshooting \u00b6","title":"Troubleshooting"},{"location":"user/troubleshooting/#troubleshooting","text":"","title":"Troubleshooting"}]}